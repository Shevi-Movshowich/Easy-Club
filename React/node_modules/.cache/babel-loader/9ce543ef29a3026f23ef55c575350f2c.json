{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programming\\\\easy-club\\\\React\\\\src\\\\Components\\\\Login\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { Button, Form, Grid, Header, Image, Message, Segment } from 'semantic-ui-react';\nimport 'semantic-ui-css/semantic.min.css';\nimport '../../App.css';\nimport { NavLink, withRouter, useLocation, Prompt } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      mail: '',\n      password: ''\n    };\n\n    this.getUser = () => {\n      axios.get(`http://localhost:64430/api/users?password=${this.state.password}&email=${this.state.mail}`).then(x => {\n        this.props.selectUser(x.data);\n        this.props.history.replace('/users/cards');\n        console.log(this.props.user);\n      }).catch(x => {\n        document.getElementById(\"login_message\").innerHTML = x.response.data.Message;\n      });\n    };\n\n    this.getEnterprise = () => {\n      axios.get(`http://localhost:64430/api/Enterprises?password=${this.state.password}&email=${this.state.mail}`).then(x => {\n        this.props.selectEnterprise(x.data);\n        console.log(this.props.enterprise);\n      }).catch(x => document.getElementById(\"login_message\").innerHTML = x.response.data.Message);\n    };\n\n    this.newPassword = () => {\n      if (this.mailValidation() === true) if (this.props.location.pathname === '/users/login') {\n        axios.get(`http://localhost:64430/api/Users?email=${this.state.mail}`).then(x => {\n          console.log(x.data);\n          this.props.selectUser(x.data);\n          console.log(this.props.user);\n          document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\n        }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\n      } else {\n        const status = false;\n        axios.get(`http://localhost:64430/api/Enterprises?email=${this.state.mail} `).then(x => {\n          console.log(x.data);\n          this.props.selectEnterprise(x.data);\n          document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\n        }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\n      }\n    };\n\n    this.mailValidation = () => {\n      if (this.state.mail === \"\") {\n        document.getElementById(\"login_message\").innerHTML = \"mail is required\";\n        document.getElementsByClassName(\"mail\")[0].classList.add(\"error\");\n        return false;\n      } else if (!this.state.mail.includes(\"@\")) {\n        document.getElementById(\"login_message\").innerHTML = \"mail must includes @\";\n        document.getElementsByClassName(\"mail\")[0].classList.add(\"error\");\n        return false;\n      }\n\n      return true;\n    };\n\n    this.passwordValidation = () => {\n      if (this.state.password === \"\") {\n        document.getElementById(\"login_message\").innerHTML = \"password is required\";\n        document.getElementsByClassName(\"password\")[0].classList.add(\"error\");\n        return false;\n      }\n\n      return true;\n    };\n\n    this.handleSubmit = e => {\n      document.getElementById(\"login_message\").innerHTML = \"\";\n\n      if (this.mailValidation() === true && this.passwordValidation() === true) {\n        if (this.props.location.pathname === '/users/login') this.getUser();else this.getEnterprise();\n      }\n\n      handleOnChangeMail = event => {\n        this.setState({\n          mail: event.target.value\n        });\n        document.getElementsByClassName(\"mail\")[0].classList.remove(\"error\");\n      };\n\n      handleOnChangePassword = event => {\n        this.setState({\n          password: event.target.value\n        });\n        document.getElementsByClassName(\"password\")[0].classList.remove(\"error\");\n      };\n\n      render();\n      return /*#__PURE__*/React.createElement(Grid, {\n        textAlign: \"center\",\n        style: {\n          height: '100vh'\n        },\n        verticalAlign: \"middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Grid.Column, {\n        style: {\n          maxWidth: 450\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        as: \"h2\",\n        color: \"teal\",\n        textAlign: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Image, {\n        src: \"/Images/logo.png\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }\n      }), \" Log-in to your account\"), /*#__PURE__*/React.createElement(Form, {\n        size: \"tiny\",\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Segment, {\n        stacked: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Form.Input, {\n        className: \"mail\",\n        fluid: true,\n        icon: \"user\",\n        iconPosition: \"left\",\n        placeholder: \"E-mail address *\",\n        type: \"text\",\n        onChange: this.handleOnChangeMail,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Form.Input, {\n        className: \"password\",\n        fluid: true,\n        icon: \"lock\",\n        iconPosition: \"left\",\n        placeholder: \"Password *\",\n        type: \"password\",\n        onChange: this.handleOnChangePassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"login_message\",\n        style: {\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        color: \"teal\",\n        fluid: true,\n        size: \"large\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"email_message\",\n        style: {\n          display: 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }\n      }, \"sending email\"))), /*#__PURE__*/React.createElement(Message, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }\n      }, \"New to us?\", /*#__PURE__*/React.createElement(NavLink, {\n        to: this.props.location.pathname === '/users/login' ? '/users/signUp' : '/enterprises/signUp',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }\n      }, \"Sign Up\"), \"\\xA0\"), /*#__PURE__*/React.createElement(Message, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }\n      }, \"forget your password?\", /*#__PURE__*/React.createElement(\"label\", {\n        onClick: this.newPassword,\n        style: {\n          color: 'blue'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 43\n        }\n      }, \"new password\"))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"newPassword\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      })));\n    };\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user.user,\n    enterprise: state.enterprise.enterprise\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    selectUser: user => dispatch({\n      type: \"SELECT_USER\",\n      payload: user\n    }),\n    selectEnterprise: enterprise => dispatch({\n      type: \"SELECT_ENTERPRISE\",\n      payload: enterprise\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["D:/Programming/easy-club/React/src/Components/Login/Login.js"],"names":["React","Component","Button","Form","Grid","Header","Image","Message","Segment","NavLink","withRouter","useLocation","Prompt","axios","connect","Login","state","mail","password","getUser","get","then","x","props","selectUser","data","history","replace","console","log","user","catch","document","getElementById","innerHTML","response","getEnterprise","selectEnterprise","enterprise","newPassword","mailValidation","location","pathname","Email","status","getElementsByClassName","classList","add","includes","passwordValidation","handleSubmit","e","handleOnChangeMail","event","setState","target","value","remove","handleOnChangePassword","render","height","maxWidth","color","display","mapStateToProps","mapDispatchToProps","dispatch","type","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button, Form, Grid, Header, Image, Message, Segment } from 'semantic-ui-react';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport '../../App.css'\r\nimport { NavLink, withRouter, useLocation, Prompt } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux'\r\nclass Login extends Component {\r\n  state = {\r\n    mail: '',\r\n    password: ''\r\n  }\r\n  getUser = () => {\r\n    axios.get(`http://localhost:64430/api/users?password=${this.state.password}&email=${this.state.mail}`).then(x => {\r\n      this.props.selectUser(x.data);\r\n      this.props.history.replace('/users/cards');\r\n      console.log(this.props.user);\r\n    }\r\n    ).catch(x => { document.getElementById(\"login_message\").innerHTML = x.response.data.Message; }\r\n    );\r\n  }\r\n  getEnterprise = () => {\r\n    axios.get(`http://localhost:64430/api/Enterprises?password=${this.state.password}&email=${this.state.mail}`).then(x => {\r\n      this.props.selectEnterprise(x.data);\r\n      console.log(this.props.enterprise);\r\n    }).catch(x => document.getElementById(\"login_message\").innerHTML = x.response.data.Message);\r\n  }\r\n  newPassword = () => {\r\n    if (this.mailValidation() === true)\r\n      if (this.props.location.pathname === '/users/login') {\r\n        axios.get(`http://localhost:64430/api/Users?email=${this.state.mail}`).then(x => {\r\n          console.log(x.data);\r\n          this.props.selectUser(x.data)\r\n          console.log(this.props.user);\r\n          document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\r\n        }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\r\n      }\r\n      else {\r\n        const status = false;\r\n        axios.get(`http://localhost:64430/api/Enterprises?email=${this.state.mail} `).then(x => {\r\n          console.log(x.data);\r\n          this.props.selectEnterprise(x.data);\r\n          document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\r\n        }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\r\n      }\r\n  }\r\n  mailValidation = () => {\r\n    if (this.state.mail === \"\") {\r\n      document.getElementById(\"login_message\").innerHTML = \"mail is required\";\r\n      document.getElementsByClassName(\"mail\")[0].classList.add(\"error\");\r\n      return false;\r\n    }\r\n    else\r\n      if (!this.state.mail.includes(\"@\")) {\r\n        document.getElementById(\"login_message\").innerHTML = \"mail must includes @\"\r\n        document.getElementsByClassName(\"mail\")[0].classList.add(\"error\");\r\n        return false\r\n      }\r\n    return true;\r\n  }\r\n  passwordValidation = () => {\r\n    if (this.state.password === \"\") {\r\n      document.getElementById(\"login_message\").innerHTML = \"password is required\";\r\n      document.getElementsByClassName(\"password\")[0].classList.add(\"error\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  handleSubmit = (e) => {\r\n    document.getElementById(\"login_message\").innerHTML = \"\";\r\n    if (this.mailValidation() === true && this.passwordValidation() === true) {\r\n      if (this.props.location.pathname === '/users/login')\r\n        this.getUser();\r\n      else\r\n        this.getEnterprise();\r\n    }\r\n    handleOnChangeMail = (event) => {\r\n      this.setState({ mail: event.target.value });\r\n      document.getElementsByClassName(\"mail\")[0].classList.remove(\"error\");\r\n    }\r\n    handleOnChangePassword = (event) => {\r\n      this.setState({ password: event.target.value });\r\n      document.getElementsByClassName(\"password\")[0].classList.remove(\"error\");\r\n    }\r\n    render()\r\n      return (\r\n        <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\r\n          <Grid.Column style={{ maxWidth: 450 }}>\r\n            <Header as='h2' color='teal' textAlign='center'>\r\n              <Image src='/Images/logo.png' /> Log-in to your account\r\n        </Header>\r\n            <Form size='tiny' onSubmit={this.handleSubmit}>\r\n              <Segment stacked>\r\n                <Form.Input className=\"mail\"\r\n                  fluid icon='user'\r\n                  iconPosition='left'\r\n                  placeholder='E-mail address *'\r\n                  type='text'\r\n                  onChange={this.handleOnChangeMail}\r\n                />\r\n                <Form.Input className=\"password\"\r\n                  fluid\r\n                  icon='lock'\r\n                  iconPosition='left'\r\n                  placeholder='Password *'\r\n                  type='password'\r\n                  onChange={this.handleOnChangePassword}\r\n                />\r\n                <div id=\"login_message\" style={{ color: \"red\" }}></div>\r\n                <Button type=\"submit\" color='teal' fluid size='large'>\r\n                  Login\r\n            </Button>\r\n                <div id=\"email_message\" style={{ display: 'none' }}>sending email</div>\r\n              </Segment>\r\n            </Form>\r\n            <Message>\r\n              New to us?<NavLink to={this.props.location.pathname === '/users/login' ? '/users/signUp' : '/enterprises/signUp'} >Sign Up</NavLink>&nbsp;\r\n      </Message>\r\n            <Message>\r\n              <label>forget your password?<label onClick={this.newPassword} style={{ color: 'blue' }}>new password</label></label>\r\n            </Message>\r\n            <div id=\"newPassword\"></div>\r\n\r\n          </Grid.Column>\r\n        </Grid>\r\n      )\r\n    }\r\n  }\r\n  const mapStateToProps = state => {\r\n    return {\r\n      user: state.user.user,\r\n      enterprise: state.enterprise.enterprise\r\n    }\r\n  }\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      selectUser: (user) => dispatch({ type: \"SELECT_USER\", payload: user }),\r\n      selectEnterprise: (enterprise) => dispatch({ type: \"SELECT_ENTERPRISE\", payload: enterprise }),\r\n    }\r\n  }\r\n  export default connect(mapStateToProps, mapDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}