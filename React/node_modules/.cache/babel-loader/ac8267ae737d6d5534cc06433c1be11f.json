{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programming\\\\easy-club\\\\React\\\\src\\\\Components\\\\Login\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { Button, Form, Grid, Header, Image, Message, Segment } from 'semantic-ui-react';\nimport 'semantic-ui-css/semantic.min.css';\nimport '../../App.css';\nimport { NavLink, withRouter, useLocation, Prompt } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      mail: '',\n      password: ''\n    };\n\n    this.getUser = () => {\n      axios.get(`http://localhost:64430/api/users?password=${this.state.password}&email=${this.state.mail}`).then(x => {\n        this.props.selectUser(x.data);\n        this.props.history.replace('/users/cards');\n        console.log(this.props.user);\n      }).catch(x => {\n        document.getElementById(\"login_message\").innerHTML = x.response.data.Message;\n      });\n    };\n\n    this.getEnterprise = () => {\n      axios.get(`http://localhost:64430/api/Enterprises?password=${this.state.password}&email=${this.state.mail}`).then(x => {\n        this.props.selectEnterprise(x.data);\n        console.log(this.props.enterprise);\n      }).catch(x => document.getElementById(\"login_message\").innerHTML = x.response.data.Message);\n    };\n\n    this.newPassword = () => {\n      if (this.mailValidation() === true) if (this.props.location.pathname === '/users/login') {\n        document.getElementById(\"newPassword\").attributes.add('loading');\n        axios.get(`http://localhost:64430/api/Users?email=${this.state.mail}`).then(x => {\n          console.log(x.data);\n          this.props.selectUser(x.data);\n          console.log(this.props.user);\n          document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\n        }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\n      } else {\n        const status = false;\n        axios.get(`http://localhost:64430/api/Enterprises?email=${this.state.mail} `).then(x => {\n          console.log(x.data);\n          this.props.selectEnterprise(x.data);\n          document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\n        }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\n      }\n    };\n\n    this.mailValidation = () => {\n      if (this.state.mail === \"\") {\n        document.getElementById(\"login_message\").innerHTML = \"mail is required\";\n        document.getElementsByClassName(\"mail\")[0].classList.add(\"error\");\n        return false;\n      } else if (!this.state.mail.includes(\"@\")) {\n        document.getElementById(\"login_message\").innerHTML = \"mail must includes @\";\n        document.getElementsByClassName(\"mail\")[0].classList.add(\"error\");\n        return false;\n      }\n\n      return true;\n    };\n\n    this.passwordValidation = () => {\n      if (this.state.password === \"\") {\n        document.getElementById(\"login_message\").innerHTML = \"password is required\";\n        document.getElementsByClassName(\"password\")[0].classList.add(\"error\");\n        return false;\n      }\n\n      return true;\n    };\n\n    this.handleSubmit = e => {\n      document.getElementById(\"login_message\").innerHTML = \"\";\n\n      if (this.mailValidation() === true && this.passwordValidation() === true) {\n        if (this.props.location.pathname === '/users/login') this.getUser();else this.getEnterprise();\n      }\n    };\n\n    this.handleOnChangeMail = event => {\n      this.setState({\n        mail: event.target.value\n      });\n      document.getElementsByClassName(\"mail\")[0].classList.remove(\"error\");\n    };\n\n    this.handleOnChangePassword = event => {\n      this.setState({\n        password: event.target.value\n      });\n      document.getElementsByClassName(\"password\")[0].classList.remove(\"error\");\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Grid, {\n      textAlign: \"center\",\n      style: {\n        height: '100vh'\n      },\n      verticalAlign: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      style: {\n        maxWidth: 450\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h2\",\n      color: \"teal\",\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: \"/Images/logo.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }), \" Log-in to your account\"), /*#__PURE__*/React.createElement(Form, {\n      size: \"tiny\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      stacked: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      className: \"mail\",\n      fluid: true,\n      icon: \"user\",\n      iconPosition: \"left\",\n      placeholder: \"E-mail address *\",\n      type: \"text\",\n      onChange: this.handleOnChangeMail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      className: \"password\",\n      fluid: true,\n      icon: \"lock\",\n      iconPosition: \"left\",\n      placeholder: \"Password *\",\n      type: \"password\",\n      onChange: this.handleOnChangePassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"login_message\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      color: \"teal\",\n      fluid: true,\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"email_message\",\n      style: {\n        display: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    }, \"sending email\"))), /*#__PURE__*/React.createElement(Message, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, \"New to us?\", /*#__PURE__*/React.createElement(NavLink, {\n      to: this.props.location.pathname === '/users/login' ? '/users/signUp' : '/enterprises/signUp',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 23\n      }\n    }, \"Sign Up\"), \"\\xA0\"), /*#__PURE__*/React.createElement(Message, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, \"forget your password?\", /*#__PURE__*/React.createElement(\"label\", {\n      onClick: this.newPassword,\n      style: {\n        color: 'blue'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 41\n      }\n    }, \"new password\"))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"newPassword\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user.user,\n    enterprise: state.enterprise.enterprise\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    selectUser: user => dispatch({\n      type: \"SELECT_USER\",\n      payload: user\n    }),\n    selectEnterprise: enterprise => dispatch({\n      type: \"SELECT_ENTERPRISE\",\n      payload: enterprise\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["D:/Programming/easy-club/React/src/Components/Login/Login.js"],"names":["React","Component","Button","Form","Grid","Header","Image","Message","Segment","NavLink","withRouter","useLocation","Prompt","axios","connect","Login","state","mail","password","getUser","get","then","x","props","selectUser","data","history","replace","console","log","user","catch","document","getElementById","innerHTML","response","getEnterprise","selectEnterprise","enterprise","newPassword","mailValidation","location","pathname","attributes","add","Email","status","getElementsByClassName","classList","includes","passwordValidation","handleSubmit","e","handleOnChangeMail","event","setState","target","value","remove","handleOnChangePassword","render","height","maxWidth","color","display","mapStateToProps","mapDispatchToProps","dispatch","type","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button, Form, Grid, Header, Image, Message, Segment } from 'semantic-ui-react';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport '../../App.css'\r\nimport { NavLink, withRouter, useLocation, Prompt } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux'\r\nclass Login extends Component {\r\n  state = {\r\n    mail: '',\r\n    password: ''\r\n  }\r\n  getUser = () => {\r\n    axios.get(`http://localhost:64430/api/users?password=${this.state.password}&email=${this.state.mail}`).then(x => {\r\n      this.props.selectUser(x.data);\r\n      this.props.history.replace('/users/cards');\r\n      console.log(this.props.user);\r\n    }\r\n    ).catch(x => { document.getElementById(\"login_message\").innerHTML = x.response.data.Message; }\r\n    );\r\n  }\r\n  getEnterprise = () => {\r\n    axios.get(`http://localhost:64430/api/Enterprises?password=${this.state.password}&email=${this.state.mail}`).then(x => {\r\n      this.props.selectEnterprise(x.data);\r\n      console.log(this.props.enterprise);\r\n    }).catch(x => document.getElementById(\"login_message\").innerHTML = x.response.data.Message);\r\n  }\r\n  newPassword = () => {\r\n    if (this.mailValidation() === true)\r\n      if (this.props.location.pathname === '/users/login') {\r\n        document.getElementById(\"newPassword\").attributes.add('loading')\r\n        axios.get(`http://localhost:64430/api/Users?email=${this.state.mail}`).then(x => {\r\n          console.log(x.data);\r\n          this.props.selectUser(x.data)\r\n          console.log(this.props.user);\r\n          document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\r\n        }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\r\n      }\r\n      else {\r\n        const status = false;\r\n        axios.get(`http://localhost:64430/api/Enterprises?email=${this.state.mail} `).then(x => {\r\n          console.log(x.data);\r\n          this.props.selectEnterprise(x.data);\r\n          document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\r\n        }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\r\n      }\r\n  }\r\n  mailValidation = () => {\r\n    if (this.state.mail === \"\") {\r\n      document.getElementById(\"login_message\").innerHTML = \"mail is required\";\r\n      document.getElementsByClassName(\"mail\")[0].classList.add(\"error\");\r\n      return false;\r\n    }\r\n    else\r\n      if (!this.state.mail.includes(\"@\")) {\r\n        document.getElementById(\"login_message\").innerHTML = \"mail must includes @\"\r\n        document.getElementsByClassName(\"mail\")[0].classList.add(\"error\");\r\n        return false\r\n      }\r\n    return true;\r\n  }\r\n  passwordValidation = () => {\r\n    if (this.state.password === \"\") {\r\n      document.getElementById(\"login_message\").innerHTML = \"password is required\";\r\n      document.getElementsByClassName(\"password\")[0].classList.add(\"error\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  handleSubmit = (e) => {\r\n    document.getElementById(\"login_message\").innerHTML = \"\";\r\n    if (this.mailValidation() === true && this.passwordValidation() === true) {\r\n      if (this.props.location.pathname === '/users/login')\r\n        this.getUser();\r\n      else\r\n        this.getEnterprise();\r\n    }\r\n  }\r\n  handleOnChangeMail = (event) => {\r\n    this.setState({ mail: event.target.value });\r\n    document.getElementsByClassName(\"mail\")[0].classList.remove(\"error\");\r\n  }\r\n  handleOnChangePassword = (event) => {\r\n    this.setState({ password: event.target.value });\r\n    document.getElementsByClassName(\"password\")[0].classList.remove(\"error\");\r\n  }\r\n  render() {\r\n    return (\r\n      <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\r\n        <Grid.Column style={{ maxWidth: 450 }}>\r\n          <Header as='h2' color='teal' textAlign='center'>\r\n            <Image src='/Images/logo.png' /> Log-in to your account\r\n        </Header>\r\n          <Form size='tiny' onSubmit={this.handleSubmit}>\r\n            <Segment stacked>\r\n              <Form.Input className=\"mail\"\r\n                fluid icon='user'\r\n                iconPosition='left'\r\n                placeholder='E-mail address *'\r\n                type='text'\r\n                onChange={this.handleOnChangeMail}\r\n              />\r\n              <Form.Input className=\"password\"\r\n                fluid\r\n                icon='lock'\r\n                iconPosition='left'\r\n                placeholder='Password *'\r\n                type='password'\r\n                onChange={this.handleOnChangePassword}\r\n              />\r\n              <div id=\"login_message\" style={{ color: \"red\" }}></div>\r\n              <Button type=\"submit\" color='teal' fluid size='large'>\r\n                Login\r\n            </Button>\r\n              <div id=\"email_message\" style={{ display: 'none' }}>sending email</div>\r\n            </Segment>\r\n          </Form>\r\n          <Message>\r\n            New to us?<NavLink to={this.props.location.pathname === '/users/login' ? '/users/signUp' : '/enterprises/signUp'} >Sign Up</NavLink>&nbsp;\r\n      </Message>\r\n          <Message>\r\n            <label>forget your password?<label onClick={this.newPassword} style={{ color: 'blue' }}>new password</label></label>\r\n          </Message>\r\n          <div id=\"newPassword\"></div>\r\n\r\n        </Grid.Column>\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.user.user,\r\n    enterprise: state.enterprise.enterprise\r\n  }\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    selectUser: (user) => dispatch({ type: \"SELECT_USER\", payload: user }),\r\n    selectEnterprise: (enterprise) => dispatch({ type: \"SELECT_ENTERPRISE\", payload: enterprise }),\r\n  }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}