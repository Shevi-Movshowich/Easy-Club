{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programming\\\\easy-club\\\\React\\\\src\\\\Components\\\\Login\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { getEnterprise } from '../../Store/actions/EnterpriseAction';\nimport { getUser } from '../../Store/actions/UserAction';\nimport { Button, Form, Grid, Header, Image, Message, Segment, Loader, Dimmer } from 'semantic-ui-react';\nimport 'semantic-ui-css/semantic.min.css';\nimport { NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport onChangeInput from \"../Service/onChangeInput\";\nimport onSubmit from \"../Service/onSubmit\";\nimport newPassword from \"../Service/newPassword\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      form: {\n        mail: {\n          newPassword: false,\n          icon: \"envelope\",\n          type: \"text\",\n          value: \"\",\n          text: \"Email\",\n          validation: {\n            pattern: /^[0-9a-zA-Z.+*%#!@]+$/,\n            required: true,\n            mail: true\n          }\n        },\n        password: {\n          icon: \"lock\",\n          type: \"password\",\n          value: \"\",\n          text: \"Password\",\n          validation: {\n            pattern: /^[0-9a-zA-Z]+$/,\n            required: true,\n            password: true\n          }\n        }\n      },\n      trySend: \"\",\n      loading: \"\",\n      errorMessage: \"\",\n      newPasswordMessage: \"\"\n    };\n\n    this.newPassword = () => {\n      const form = { ...this.state.form\n      };\n      newPassword(form);\n      const obj = onSubmit(form);\n\n      if (obj !== null) {\n        this.setState({\n          form: form,\n          trySend: true,\n          errorMessage: obj.error\n        });\n      } else {\n        if (this.props.location.pathname === '/users/login') {\n          axios.get(`http://localhost:64430/api/Users?email=${this.state.mail}`).then(x => {\n            console.log(x.data);\n            this.setState({\n              newPasswordMessage: \"sending email to:  \" + x.data.Email\n            });\n          }).catch(x => this.setState({\n            newPasswordMessage: x.response.data.Message\n          }));\n        } else {\n          const status = false;\n          axios.get(`http://localhost:64430/api/Enterprises?email=${this.state.mail} `).then(x => {\n            console.log(x.data);\n            this.props.selectEnterprise(x.data);\n            document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\n          }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\n        }\n      }\n    };\n\n    this.handleSubmit = e => {\n      const form = { ...this.state.form\n      };\n      const obj = onSubmit(form);\n\n      if (obj !== null) {\n        this.setState({\n          form: form,\n          trySend: true,\n          errorMessage: obj.error\n        });\n      } else {\n        if (this.props.location.pathname === '/users/login') {\n          this.props.selectUser(this.state.form.mail.value, this.state.form.password.value);\n          this.props.history.replace('cards');\n        } else this.props.selectEnterprise(this.state.mail, this.state.password);\n      }\n    };\n\n    this.onChangeHendler = (e, id) => {\n      this.setState({\n        trySend: false,\n        errorMessage: \"\"\n      });\n      this.props.changeUserError();\n      const form = { ...this.state.form\n      };\n      const inputChanged = { ...form[id]\n      };\n      onChangeInput(e, inputChanged, form, id);\n      this.setState({\n        form: form\n      });\n    };\n  }\n\n  render() {\n    const array = [];\n\n    for (let x in this.state.form) {\n      array.push({\n        id: x,\n        config: this.state.form[x]\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(Grid, {\n      textAlign: \"center\",\n      style: {\n        height: '100vh'\n      },\n      verticalAlign: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      style: {\n        maxWidth: 450,\n        boxShadow: '5px 2px 1px -1px rgba(0, 0, 0, 0.2), 5px 5px 5px 5px rgba(0, 0, 0, 0.14), 5px 1px 7px 4px rgba(0, 0, 0, 0.12)',\n        borderRadius: '10%',\n        height: '60%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h2\",\n      color: \"teal\",\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, \"Login to your accounts\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 35\n      }\n    }), /*#__PURE__*/React.createElement(Image, {\n      src: \"/Images/profile.PNG\",\n      style: {\n        height: '15vh',\n        width: '8vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Form, {\n      size: \"tiny\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      stacked: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, array.map((x, i) => {\n      return /*#__PURE__*/React.createElement(Form.Input, {\n        key: i,\n        iconPosition: \"left\",\n        type: x.config.type,\n        onChange: event => this.onChangeHendler(event, x.id),\n        className: this.state.trySend && !this.state.form[x.id].valid ? \"error\" : x.id,\n        placeholder: x.config.text + \"*\",\n        icon: x.config.icon,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 24\n        }\n      });\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"message\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    }, this.state.errorMessage), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      color: \"teal\",\n      fluid: true,\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"email_message\",\n      style: {\n        color: \"red\",\n        marginTop: \"1vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, this.props.userError))), /*#__PURE__*/React.createElement(Message, {\n      style: {\n        boxShadow: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }, \"New to us?\", /*#__PURE__*/React.createElement(NavLink, {\n      to: this.props.location.pathname === '/users/login' ? '/users/signUp' : '/enterprises/signUp',\n      style: {\n        color: '#00b5ad'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 23\n      }\n    }, \"Sign Up\"), \"\\xA0\"), /*#__PURE__*/React.createElement(Message, {\n      style: {\n        boxShadow: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, \"forget your password?\", /*#__PURE__*/React.createElement(\"label\", {\n      onClick: this.newPassword,\n      style: {\n        color: '#00b5ad'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 42\n      }\n    }, \"new password\"))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"newPassword\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    }, this.state.newPasswordMessage)), this.props.loading ? /*#__PURE__*/React.createElement(Dimmer, {\n      id: \"dimmer\",\n      inverted: \"false\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(Loader, {\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }, \"Loading\")) : null);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user.user,\n    enterprise: state.enterprise.enterprise,\n    userError: state.user.error // enterpriseError:state.enterprise.error,\n\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    selectUser: (mail, password) => dispatch(getUser(mail, password)),\n    selectEnterprise: (mail, password) => dispatch(getEnterprise(mail, password)),\n    changeUserError: () => dispatch({\n      type: \"ERROR\",\n      payload: \"\"\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["D:/Programming/easy-club/React/src/Components/Login/Login.js"],"names":["React","Component","getEnterprise","getUser","Button","Form","Grid","Header","Image","Message","Segment","Loader","Dimmer","NavLink","axios","connect","onChangeInput","onSubmit","newPassword","Login","state","form","mail","icon","type","value","text","validation","pattern","required","password","trySend","loading","errorMessage","newPasswordMessage","obj","setState","error","props","location","pathname","get","then","x","console","log","data","Email","catch","response","status","selectEnterprise","document","getElementById","innerHTML","handleSubmit","e","selectUser","history","replace","onChangeHendler","id","changeUserError","inputChanged","render","array","push","config","height","maxWidth","boxShadow","borderRadius","width","map","i","event","valid","color","marginTop","userError","mapStateToProps","user","enterprise","mapDispatchToProps","dispatch","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { getEnterprise } from '../../Store/actions/EnterpriseAction'\r\nimport { getUser } from '../../Store/actions/UserAction'\r\nimport { Button, Form, Grid, Header, Image, Message, Segment, Loader, Dimmer } from 'semantic-ui-react';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport { NavLink } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux'\r\nimport onChangeInput from \"../Service/onChangeInput\";\r\nimport onSubmit from \"../Service/onSubmit\";\r\nimport newPassword from \"../Service/newPassword\"\r\nclass Login extends Component {\r\n  state = {\r\n    form: {\r\n      mail: {\r\n        newPassword: false,\r\n        icon: \"envelope\",\r\n        type: \"text\",\r\n        value: \"\",\r\n        text: \"Email\",\r\n        validation: {\r\n          pattern: /^[0-9a-zA-Z.+*%#!@]+$/,\r\n          required: true,\r\n          mail: true,\r\n        }\r\n      },\r\n      password: {\r\n        icon: \"lock\",\r\n        type: \"password\",\r\n        value: \"\",\r\n        text: \"Password\",\r\n        validation: {\r\n          pattern: /^[0-9a-zA-Z]+$/,\r\n          required: true,\r\n          password: true,\r\n        }\r\n      }\r\n    },\r\n    trySend: \"\",\r\n    loading: \"\",\r\n    errorMessage: \"\",\r\n    newPasswordMessage:\"\",\r\n  }\r\n  newPassword = () => {\r\n    const form = { ...this.state.form };\r\n    newPassword(form);\r\n    const obj = onSubmit(form)\r\n    if (obj !== null) {\r\n      this.setState({ form: form, trySend: true, errorMessage: obj.error });\r\n    }\r\n    else {\r\n      if (this.props.location.pathname === '/users/login') {\r\n        axios.get(`http://localhost:64430/api/Users?email=${this.state.mail}`).then(x => {\r\n          console.log(x.data)\r\n        this.setState({newPasswordMessage:\"sending email to:  \" + x.data.Email});\r\n        }).catch(x => this.setState({newPasswordMessage:x.response.data.Message}) );\r\n      }\r\n      else {\r\n        const status = false;\r\n        axios.get(`http://localhost:64430/api/Enterprises?email=${this.state.mail} `).then(x => {\r\n          console.log(x.data);\r\n          this.props.selectEnterprise(x.data);\r\n          document.getElementById(\"newPassword\").innerHTML = \"sending email to:  \" + x.data.Email;\r\n        }).catch(x => document.getElementById(\"newPassword\").innerHTML = x.response.data.Message);\r\n      }\r\n    }\r\n  }\r\n  handleSubmit = (e) => {\r\n    const form = { ...this.state.form };\r\n    const obj = onSubmit(form)\r\n    if (obj !== null) {\r\n      this.setState({ form: form, trySend: true, errorMessage: obj.error });\r\n    }\r\n    else {\r\n      if (this.props.location.pathname === '/users/login') {\r\n        this.props.selectUser(this.state.form.mail.value, this.state.form.password.value);\r\n        this.props.history.replace('cards')\r\n      }\r\n      else\r\n        this.props.selectEnterprise(this.state.mail, this.state.password);\r\n    }\r\n  }\r\n  onChangeHendler = (e, id) => {\r\n    this.setState({ trySend: false, errorMessage: \"\" })\r\n    this.props.changeUserError();\r\n    const form = { ...this.state.form };\r\n    const inputChanged = { ...form[id] };\r\n    onChangeInput(e, inputChanged, form, id);\r\n    this.setState({ form: form })\r\n  }\r\n  render() {\r\n    const array = [];\r\n    for (let x in this.state.form) {\r\n      array.push({ id: x, config: this.state.form[x] })\r\n    }\r\n    return (\r\n      <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\r\n        <Grid.Column style={{ maxWidth: 450, boxShadow: '5px 2px 1px -1px rgba(0, 0, 0, 0.2), 5px 5px 5px 5px rgba(0, 0, 0, 0.14), 5px 1px 7px 4px rgba(0, 0, 0, 0.12)', borderRadius: '10%', height: '60%' }}>\r\n          <Header as='h2' color='teal' textAlign='center'>\r\n            Login to your accounts<br></br>\r\n            <Image src='/Images/profile.PNG' style={{ height: '15vh', width: '8vw' }} />\r\n          </Header>\r\n          <Form size='tiny' onSubmit={this.handleSubmit}>\r\n            <Segment stacked>\r\n              {array.map((x, i) => {\r\n                return <Form.Input\r\n                  key={i} iconPosition=\"left\"\r\n                  type={x.config.type}\r\n                  onChange={event => this.onChangeHendler(event, x.id)}\r\n                  className={this.state.trySend && !this.state.form[x.id].valid ? \"error\" : x.id}\r\n                  placeholder={x.config.text + \"*\"}\r\n                  icon={x.config.icon}>\r\n                </Form.Input>\r\n              })}\r\n              <div id=\"message\" style={{ color: \"red\" }}>{this.state.errorMessage}</div>\r\n              <Button type=\"submit\" color='teal' fluid size='large'>\r\n                Login\r\n            </Button>\r\n              <div id=\"email_message\" style={{ color: \"red\", marginTop: \"1vh\" }}>{this.props.userError}</div>\r\n            </Segment>\r\n          </Form>\r\n          <Message style={{ boxShadow: 'none' }}>\r\n            New to us?<NavLink to={this.props.location.pathname === '/users/login' ? '/users/signUp' : '/enterprises/signUp'} style={{ color: '#00b5ad' }}>Sign Up</NavLink>&nbsp;\r\n      </Message>\r\n          <Message style={{ boxShadow: 'none' }}>\r\n            <label >forget your password?<label onClick={this.newPassword} style={{ color: '#00b5ad' }}>new password</label></label>\r\n          </Message>\r\n            <div id=\"newPassword\" style={{color:\"red\"}}>{this.state.newPasswordMessage}</div>\r\n        </Grid.Column>\r\n        {this.props.loading ? <Dimmer id='dimmer' inverted='false'>\r\n          <Loader size='large'>Loading</Loader>\r\n        </Dimmer> : null}\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.user.user,\r\n    enterprise: state.enterprise.enterprise,\r\n    userError: state.user.error,\r\n    // enterpriseError:state.enterprise.error,\r\n  }\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    selectUser: (mail, password) => dispatch(getUser(mail, password)),\r\n    selectEnterprise: (mail, password) => dispatch(getEnterprise(mail, password)),\r\n    changeUserError: () => dispatch({ type: \"ERROR\", payload: \"\" })\r\n  }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}