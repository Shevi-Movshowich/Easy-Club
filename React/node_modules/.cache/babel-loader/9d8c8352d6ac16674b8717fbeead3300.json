{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programming\\\\easy-club\\\\React\\\\src\\\\Components\\\\Login\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { getEnterprise } from '../../Store/actions/EnterpriseAction';\nimport { getUser } from \"../../Store/actions/UserAction\";\nimport { Button, Icon, Form, Grid, Header, Message, Segment, Loader, Dimmer } from 'semantic-ui-react';\nimport 'semantic-ui-css/semantic.min.css';\nimport { NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport onChangeInput from \"../Service/onChangeInput\";\nimport onSubmit from \"../Service/onSubmit\";\nimport newPassword from \"../Service/newPassword\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      form: {\n        mail: {\n          icon: \"envelope\",\n          type: \"text\",\n          value: \"\",\n          text: \"Email\",\n          validation: {\n            pattern: /^[0-9a-zA-Z.+*%#!@]+$/,\n            required: true,\n            mail: true\n          }\n        },\n        password: {\n          icon: \"lock\",\n          type: \"password\",\n          value: \"\",\n          text: \"Password\",\n          validation: {\n            pattern: /^[0-9a-zA-Z]+$/,\n            required: true,\n            password: true\n          }\n        }\n      },\n      trySend: \"\",\n      loading: false,\n      errorMessage: \"\",\n      newPasswordMessage: \"\"\n    };\n    this.location = this.props.location.pathname;\n\n    this.newPassword = () => {\n      const form = { ...this.state.form\n      };\n      const obj = newPassword(form);\n\n      if (obj !== null) {\n        this.setState({\n          form: form,\n          trySend: true,\n          errorMessage: obj.error\n        });\n      } else {\n        var route = \"users\";\n        if (this.location !== '/users/login') route = \"enterprises\";\n        this.setState({\n          loading: true\n        });\n        axios.get(`http://localhost:64430/api/${route}?email=${this.state.form.mail.value}`).then(x => {\n          this.setState({\n            loading: false,\n            newPasswordMessage: \"sending email to:  \" + this.state.form.mail.value\n          });\n        }).catch(x => {\n          this.setState({\n            loading: false,\n            newPasswordMessage: x.response.data.Message\n          });\n        });\n      }\n    };\n\n    this.handleSubmit = e => {\n      const form = { ...this.state.form\n      };\n      const obj = onSubmit(form);\n\n      if (obj !== null) {\n        this.setState({\n          form: form,\n          trySend: true,\n          errorMessage: obj.error\n        });\n      } else {\n        if (this.location === '/users/login') {\n          this.props.selectUser(this.state.form.mail.value, this.state.form.password.value);\n          if (this.props.user !== null) this.props.history.replace('cards'); // this.props.setLoading(true)\n          // getUser(this.state.form.mail.value, this.state.form.password.value).then(x => {\n          //   // this.props.setLoading(false)\n          //   this.props.history.replace('cards');\n          // }).catch(x => {\n          //   this.props.setLoading(false)\n          //   this.props.changeUserError(x.response.data.Message)\n          // })\n        } else this.props.selectEnterprise(this.state.form.mail.value, this.state.form.password.value);\n      }\n    };\n\n    this.onChangeHendler = (e, id) => {\n      // this.state.changeUserError();\n      // this.state.changeEnterpError();\n      this.setState({\n        trySend: false,\n        errorMessage: \"\"\n      });\n      const form = { ...this.state.form\n      };\n      const inputChanged = { ...form[id]\n      };\n      onChangeInput(e, inputChanged, form, id);\n      this.setState({\n        form: form\n      });\n    };\n  }\n\n  render() {\n    const array = [];\n\n    for (let x in this.state.form) {\n      array.push({\n        id: x,\n        config: this.state.form[x]\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, this.props.message === null ? /*#__PURE__*/React.createElement(Grid, {\n      textAlign: \"center\",\n      style: {\n        height: '100vh'\n      },\n      verticalAlign: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 40\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      style: {\n        maxWidth: 450,\n        boxShadow: '5px 2px 1px -1px rgba(0, 0, 0, 0.2), 5px 5px 5px 5px rgba(0, 0, 0, 0.14), 5px 1px 7px 4px rgba(0, 0, 0, 0.12)',\n        borderRadius: '10%',\n        height: '60%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h2\",\n      color: \"teal\",\n      textAlign: \"center\",\n      style: {\n        textShadow: \"2px 2px 2px #888888,5px 5px 7px #888888\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, \"Log in\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Icon.Group, {\n      size: \"huge\",\n      style: {\n        marginTop: \"1vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"user circle\",\n      size: \"large\",\n      color: \"black\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(Form, {\n      size: \"tiny\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      stacked: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, array.map((x, i) => {\n      return /*#__PURE__*/React.createElement(Form.Input, {\n        key: i,\n        iconPosition: \"left\",\n        type: x.config.type,\n        onChange: event => this.onChangeHendler(event, x.id),\n        className: this.state.trySend && !this.state.form[x.id].valid ? \"error\" : x.id,\n        placeholder: x.config.text + \"*\",\n        icon: x.config.icon,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 26\n        }\n      });\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"message\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, this.state.errorMessage), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      color: \"teal\",\n      fluid: true,\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }, \"Log in\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"email_message\",\n      style: {\n        color: \"red\",\n        marginTop: \"1vh\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, this.props.userError || this.props.enterpError))), /*#__PURE__*/React.createElement(Message, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, \"New to us ?\", /*#__PURE__*/React.createElement(NavLink, {\n      to: this.location === '/users/login' ? '/users/signUp' : '/enterprises/signUp',\n      style: {\n        color: '#00b5ad'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 26\n      }\n    }, \" Sign up\")), /*#__PURE__*/React.createElement(Message, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, \"Forget your password ? \", /*#__PURE__*/React.createElement(\"label\", {\n      onClick: this.newPassword,\n      style: {\n        color: '#00b5ad',\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 46\n      }\n    }, \" New password\")), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"newPassword\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }, this.state.newPasswordMessage)), /*#__PURE__*/React.createElement(Dimmer, {\n      id: \"dimmer\",\n      active: this.props.enterp_loading !== false || this.props.user_loading,\n      inverted: \"false\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Loader, {\n      size: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, \"Loading\")))) : /*#__PURE__*/React.createElement(Message, {\n      size: \"massive\",\n      style: {\n        textAlign: \"center\",\n        position: \"absolute\",\n        top: \"30%\",\n        width: \"80%\",\n        marginLeft: \"10%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Message.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }\n    }, \"Your request has been received successfully\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, \"Sending link for your account to your email ,the link will be valid for the next 15 minutes\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user.user,\n    enterprise: state.enterprise.enterprise,\n    userError: state.user.error,\n    enterpError: state.enterprise.error,\n    user_loading: state.user.loading,\n    enterp_loading: state.enterprise.loading,\n    message: state.enterprise.message\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    selectEnterprise: (mail, password) => dispatch(getEnterprise(mail, password)),\n    selectUser: (mail, password) => dispatch(getUser(mail, password)),\n    setLoading: status => dispatch({\n      type: \"LOADING\",\n      payload: status\n    }),\n    changeUserError: error => dispatch({\n      type: \"ERROR\",\n      payload: error\n    }) // changeEnterpError: () => dispatch({ type: \"ERROR\", payload: \"\" })\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["D:/Programming/easy-club/React/src/Components/Login/Login.js"],"names":["React","Component","getEnterprise","getUser","Button","Icon","Form","Grid","Header","Message","Segment","Loader","Dimmer","NavLink","axios","connect","onChangeInput","onSubmit","newPassword","Login","state","form","mail","icon","type","value","text","validation","pattern","required","password","trySend","loading","errorMessage","newPasswordMessage","location","props","pathname","obj","setState","error","route","get","then","x","catch","response","data","handleSubmit","e","selectUser","user","history","replace","selectEnterprise","onChangeHendler","id","inputChanged","render","array","push","config","message","height","maxWidth","boxShadow","borderRadius","textShadow","marginTop","map","i","event","valid","color","userError","enterpError","cursor","enterp_loading","user_loading","textAlign","position","top","width","marginLeft","mapStateToProps","enterprise","mapDispatchToProps","dispatch","setLoading","status","payload","changeUserError"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { getEnterprise } from '../../Store/actions/EnterpriseAction'\r\nimport {getUser} from \"../../Store/actions/UserAction\"\r\nimport { Button, Icon, Form, Grid, Header, Message, Segment, Loader, Dimmer } from 'semantic-ui-react';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport { NavLink } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux'\r\nimport onChangeInput from \"../Service/onChangeInput\";\r\nimport onSubmit from \"../Service/onSubmit\";\r\nimport newPassword from \"../Service/newPassword\"\r\nclass Login extends Component {\r\n  state = {\r\n    form: {\r\n      mail: {\r\n        icon: \"envelope\",\r\n        type: \"text\",\r\n        value: \"\",\r\n        text: \"Email\",\r\n        validation: {\r\n          pattern: /^[0-9a-zA-Z.+*%#!@]+$/,\r\n          required: true,\r\n          mail: true,\r\n        }\r\n      },\r\n      password: {\r\n        icon: \"lock\",\r\n        type: \"password\",\r\n        value: \"\",\r\n        text: \"Password\",\r\n        validation: {\r\n          pattern: /^[0-9a-zA-Z]+$/,\r\n          required: true,\r\n          password: true,\r\n        }\r\n      }\r\n    },\r\n    trySend: \"\",\r\n    loading: false,\r\n    errorMessage: \"\",\r\n    newPasswordMessage: \"\",\r\n  }\r\n  location = this.props.location.pathname;\r\n  newPassword = () => {\r\n    const form = { ...this.state.form };\r\n    const obj = newPassword(form);\r\n    if (obj !== null) {\r\n      this.setState({ form: form, trySend: true, errorMessage: obj.error });\r\n    }\r\n    else {\r\n      var route = \"users\";\r\n      if (this.location !== '/users/login')\r\n        route = \"enterprises\";\r\n      this.setState({ loading: true })\r\n      axios.get(`http://localhost:64430/api/${route}?email=${this.state.form.mail.value}`).then(x => {\r\n        this.setState({ loading: false, newPasswordMessage: \"sending email to:  \" + this.state.form.mail.value });\r\n      }).catch(x => {\r\n        this.setState({ loading: false, newPasswordMessage: x.response.data.Message })\r\n      });\r\n    }\r\n  }\r\n  handleSubmit = (e) => {\r\n    const form = { ...this.state.form };\r\n    const obj = onSubmit(form)\r\n    if (obj !== null) {\r\n      this.setState({ form: form, trySend: true, errorMessage: obj.error });\r\n    }\r\n    else {\r\n      if (this.location === '/users/login') {\r\n        this.props.selectUser(this.state.form.mail.value, this.state.form.password.value);\r\n        if(this.props.user!==null)\r\n        this.props.history.replace('cards');\r\n        // this.props.setLoading(true)\r\n        // getUser(this.state.form.mail.value, this.state.form.password.value).then(x => {\r\n        //   // this.props.setLoading(false)\r\n        //   this.props.history.replace('cards');\r\n        // }).catch(x => {\r\n        //   this.props.setLoading(false)\r\n        //   this.props.changeUserError(x.response.data.Message)\r\n        // })\r\n      }\r\n      else\r\n        this.props.selectEnterprise(this.state.form.mail.value, this.state.form.password.value);\r\n    }\r\n  }\r\n  onChangeHendler = (e, id) => {\r\n    // this.state.changeUserError();\r\n    // this.state.changeEnterpError();\r\n    this.setState({ trySend: false, errorMessage: \"\" })\r\n    const form = { ...this.state.form };\r\n    const inputChanged = { ...form[id] };\r\n    onChangeInput(e, inputChanged, form, id);\r\n    this.setState({ form: form })\r\n  }\r\n  render() {\r\n    const array = [];\r\n    for (let x in this.state.form) {\r\n      array.push({ id: x, config: this.state.form[x] })\r\n    }\r\n    return (\r\n      <div>\r\n        {this.props.message === null ? <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\r\n          <Grid.Column style={{ maxWidth: 450, boxShadow: '5px 2px 1px -1px rgba(0, 0, 0, 0.2), 5px 5px 5px 5px rgba(0, 0, 0, 0.14), 5px 1px 7px 4px rgba(0, 0, 0, 0.12)', borderRadius: '10%', height: '60%' }}>\r\n            <Header as='h2' color='teal' textAlign='center' style={{ textShadow: \"2px 2px 2px #888888,5px 5px 7px #888888\" }}>\r\n              Log in\r\n            <br></br>\r\n              <Icon.Group size='huge' style={{ marginTop: \"1vh\" }}>\r\n                <Icon name='user circle' size='large' color='black' />\r\n              </Icon.Group>\r\n            </Header>\r\n            <Form size='tiny' onSubmit={this.handleSubmit}>\r\n              <Segment stacked>\r\n                {array.map((x, i) => {\r\n                  return <Form.Input\r\n                    key={i} iconPosition=\"left\"\r\n                    type={x.config.type}\r\n                    onChange={event => this.onChangeHendler(event, x.id)}\r\n                    className={this.state.trySend && !this.state.form[x.id].valid ? \"error\" : x.id}\r\n                    placeholder={x.config.text + \"*\"}\r\n                    icon={x.config.icon}>\r\n                  </Form.Input>\r\n                })}\r\n                <div id=\"message\" style={{ color: \"red\" }}>{this.state.errorMessage}</div>\r\n                <Button type=\"submit\" color='teal' fluid size='large'>\r\n                  Log in\r\n            </Button>\r\n                <div id=\"email_message\" style={{ color: \"red\", marginTop: \"1vh\" }}>{this.props.userError || this.props.enterpError}</div>\r\n              </Segment>\r\n            </Form>\r\n            <Message>\r\n              New to us ?<NavLink to={this.location === '/users/login' ? '/users/signUp' : '/enterprises/signUp'} style={{ color: '#00b5ad' }}> Sign up</NavLink>\r\n            </Message>\r\n            <Message>\r\n              <label >Forget your password ? <label onClick={this.newPassword} style={{ color: '#00b5ad', cursor: \"pointer\" }}> New password</label></label>\r\n              <div id=\"newPassword\" style={{ color: \"red\" }}>{this.state.newPasswordMessage}</div>\r\n            </Message>\r\n            <Dimmer id='dimmer' active={this.props.enterp_loading!==false  || this.props.user_loading } inverted='false'>\r\n              <Loader size='large'>Loading</Loader>\r\n            </Dimmer>\r\n          </Grid.Column>\r\n        </Grid> :\r\n          <Message size='massive' style={{ textAlign: \"center\", position: \"absolute\", top: \"30%\", width: \"80%\", marginLeft: \"10%\" }} >\r\n            <Message.Header>Your request has been received successfully</Message.Header>\r\n            <p>Sending link for your account to your email ,the link will be valid for the next 15 minutes</p>\r\n          </Message>}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.user.user,\r\n    enterprise: state.enterprise.enterprise,\r\n    userError: state.user.error,\r\n    enterpError: state.enterprise.error,\r\n    user_loading: state.user.loading,\r\n    enterp_loading: state.enterprise.loading,\r\n    message: state.enterprise.message\r\n  }\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    selectEnterprise: (mail, password) => dispatch(getEnterprise(mail, password)),\r\n    selectUser: (mail, password) => dispatch(getUser(mail, password)),\r\n    setLoading:(status)=> dispatch({ type: \"LOADING\", payload: status }),\r\n    changeUserError: (error) => dispatch({ type: \"ERROR\", payload:error }),\r\n    // changeEnterpError: () => dispatch({ type: \"ERROR\", payload: \"\" })\r\n  }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}